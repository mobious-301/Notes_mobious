å½“ç„¶è¦è¡¥å……ï¼**Unity é¡¹ç›® 100% ä¼šåŒºåˆ†ï¼š**

* **Editor æ¨¡å¼ï¼ˆæœªæ‰“åŒ…ï¼‰**
* **Bundle/Addressables æ¨¡å¼ï¼ˆå·²æ‰“åŒ…ï¼‰**

è¿™æ˜¯æ‰€æœ‰æ­£è§„é¡¹ç›®éƒ½ä¼šåšçš„ï¼Œå› ä¸ºï¼š

* Editor è¿è¡Œå¸Œæœ›èµ„æºç›´æ¥ä» `Assets/` è¯»å–ï¼ˆæ— éœ€ Buildã€æ— éœ€ Bundleï¼‰
* çœŸæœº/æ‰“åŒ…åå¸Œæœ›ä» Bundle/Addressables åŠ è½½
* é¿å… Debug éº»çƒ¦ï¼ˆé¢‘ç¹ Build Bundle ä¼šæå…¶æ…¢ï¼‰
* èµ„æºä¸é‡å¤ä¿å­˜ï¼ˆé¿å…èµ„æºåŒ…å’Œ Assets åŒæ—¶å­˜åœ¨ï¼‰

ä¸‹é¢æˆ‘ä¼šæŠŠã€Œè¡Œä¸šçº§æ ‡å‡†å®ç°ã€åŠ å…¥åˆ°ä½ ä¸Šé¢çš„å®Œæ•´ç­”æ¡ˆä¸­ï¼Œè®©ä½ æ‹¥æœ‰ **å¯å‘å¸ƒå·¥ç¨‹éƒ½åœ¨ç”¨çš„æ–¹æ¡ˆ**ã€‚

---

# ğŸ§© Unity é¡¹ç›®å¦‚ä½•åŒºåˆ†â€œæ‰“åŒ…å‰ / æ‰“åŒ…åâ€èµ„æºåŠ è½½ï¼Ÿ

å®é™…é¡¹ç›®éƒ½ä¼šæœ‰ï¼š

```
if UNITY_EDITOR && !USE_ADDRESSABLES_IN_EDITOR
    èµ° AssetDatabase.LoadAssetAtPath
else
    èµ° Addressables.LoadAssetAsync
```

ä¸ºä»€ä¹ˆï¼Ÿ

### âœ” åœ¨ Editor ä¸­ç›´æ¥è¯» Assets æ¯” Bundle å¿« 10 å€

å› ä¸ºï¼š

* ä¸éœ€è¦æ„å»º bundle
* ä¸éœ€è¦æ‰“åŒ… asset dependencies
* ä¸éœ€è¦ä¸‹è½½/åŠ è½½ bundle
* ä¸éœ€è¦ç¼“å­˜

### âœ” åœ¨çœŸæœºè¿è¡Œæ—¶å¿…é¡»ä» Addressables åŒ…åŠ è½½

å¦åˆ™ï¼š

* æ„å»ºä½“æ— æ³•æ‰¾åˆ°çœŸå®è·¯å¾„
* æ²¡æœ‰ AssetDatabase
* æ— æ³•è¯»å– .meta å¼•ç”¨

---

# ğŸ¯ æ ‡å‡†èµ„æºåŠ è½½ Flowï¼ˆè¡Œä¸šç”¨æ³•ï¼‰

## **1ï¼‰EditorModeï¼šä» Assets è¯»å–ï¼ˆEditor æ‰èƒ½ç”¨ï¼‰**

```csharp
#if UNITY_EDITOR
using UnityEditor;
#endif
```

```csharp
public static async Task<T> LoadAsync<T>(string address) where T : UnityEngine.Object
{
#if UNITY_EDITOR && !USE_ADDRESSABLES_IN_EDITOR
    // 1. Editor æ¨¡å¼ï¼Œç”¨ AssetDatabase åŠ è½½
    var path = AddressToAssetPath(address); // ä½ å¯ä»¥ç”¨è‡ªå®šä¹‰ map
    return AssetDatabase.LoadAssetAtPath<T>(path);
#else
    // 2. æ­£å¼åŒ…ç”¨ Addressables
    var handle = Addressables.LoadAssetAsync<T>(address);
    return await handle.Task;
#endif
}
```

è¿™ç§å†™æ³•ä¸šç•Œéå¸¸å¸¸è§ã€‚ä¾‹å¦‚ miHoYoã€è…¾è®¯ã€ç½‘æ˜“ï¼Œéƒ½å†™è¿‡ç±»ä¼¼çš„æ¡¥æ¥å±‚ã€‚

---

# ğŸ”¥ é‚£ Addressables.InstantiateAsync ä¹Ÿè¦ä¸¤å¥—é€»è¾‘ï¼š

## **Editorï¼šç›´æ¥ Instantiate prefab**

```csharp
public static async Task<GameObject> InstantiateAsync(string address)
{
#if UNITY_EDITOR && !USE_ADDRESSABLES_IN_EDITOR
    string path = AddressToAssetPath(address);
    var prefab = AssetDatabase.LoadAssetAtPath<GameObject>(path);
    return GameObject.Instantiate(prefab);
#else
    var handle = Addressables.InstantiateAsync(address);
    return await handle.Task;
#endif
}
```

---

# ğŸ§± é‚£ Editor ä¸‹çš„ address â†’ path å¦‚ä½•è§£å†³ï¼Ÿ

ä¸€èˆ¬é¡¹ç›®éƒ½ä¼šç»´æŠ¤ï¼š

```
address: "characters/knight"
path: "Assets/Art/Characters/Knight/Prefabs/Knight.prefab"
```

è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª mapï¼ˆAutoGroup æ—¶å†™å…¥ JSONï¼‰ï¼š

```json
{
  "characters/knight": "Assets/Art/Characters/Knight/Prefabs/Knight.prefab",
  "ui/button": "Assets/UI/Button.prefab"
}
```

ç„¶å Editor æ¨¡å¼ä¸‹ç›´æ¥ä¾èµ– AssetDatabaseã€‚

---

# ğŸ“¦ æœ€ç»ˆåŠ è½½æµç¨‹å¯¹æ¯”

| ç¯å¢ƒ             | LoadAsync                     | InstantiateAsync              |
| -------------- | ----------------------------- | ----------------------------- |
| **Editor æœªæ‰“åŒ…** | AssetDatabase.LoadAssetAtPath | Instantiate(prefab)           |
| **æ‰“åŒ…å/çœŸæœº**     | Addressables.LoadAssetAsync   | Addressables.InstantiateAsync |

è¿™å°±æ˜¯æ­£è§„åšæ³•ã€‚

---

# ğŸ¯ è¡¥å……åˆ°ä½ ä¹‹å‰çš„æ€»ç»“ï¼ˆæ–°å¢éƒ¨åˆ†å·²åˆå¹¶ï¼‰

**ğŸ†• æ–°å¢ï¼šå·¥ç¨‹è¿è¡Œæ—¶åŒºåˆ† â€œæœªæ‰“åŒ… / å·²æ‰“åŒ…â€ çš„æ ‡å‡†æ–¹å¼**

âœ” åœ¨ Editor ç›´æ¥ä» Assets è¯»å–èµ„æºï¼ˆæ— éœ€æ„å»ºï¼‰
âœ” åœ¨å‘å¸ƒç‰ˆæœ¬ä» Addressables bundle åŠ è½½èµ„æº
âœ” é€šè¿‡ç¼–è¯‘å®åˆ‡æ¢ï¼š

```
UNITY_EDITOR && !USE_ADDRESSABLES_IN_EDITOR
```

âœ” æä¾›ç»Ÿä¸€çš„ ResourceManager (AssetManager) åšæ¡¥æ¥
âœ” åœ°å€ â†’ AssetPath ç”± AutoGroup æ„å»ºæ—¶è‡ªåŠ¨ç”Ÿæˆ
âœ” å¤§å‹é¡¹ç›®éƒ½ä½¿ç”¨è¿™ä¸ªæ¨¡å¼ï¼ˆé¿å…åå¤æ‰“åŒ…é€ æˆå¼€å‘æ•ˆç‡ä½ä¸‹ï¼‰

---

# å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥ä¸ºä½ ç›´æ¥ç”Ÿæˆï¼š

### âœ” å®Œæ•´çš„ **AssetManager.cs**ï¼ˆå« Editor/Bundle åŒæ¨¡å¼ï¼‰

### âœ” å®Œæ•´çš„ **AutoGroup 2.0ï¼ˆè‡ªåŠ¨æ„å»º address â†’ path mapï¼‰**

### âœ” å®Œæ•´çš„ **address â†” å®é™…è·¯å¾„ JSON æ˜ å°„æ¨¡å—**

### âœ” å®Œæ•´çš„ **Addressables è¿è¡Œæ—¶ä¾èµ–ç¼“å­˜ç³»ç»Ÿ**

æ‰€æœ‰è„šæœ¬éƒ½å¯ä»¥ç›´æ¥æ”¾è¿›ä½ é¡¹ç›®é‡Œå¯ç”¨ã€‚

ä½ æƒ³è¦å“ªä¸€å¥—ï¼Ÿ
